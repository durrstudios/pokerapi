const express=require("express"),bodyParser=require("body-parser"),path=require("path"),app=express(),port=3e3;var cors=require("cors");app.use(cors());let playerArray=[],lastReadBetIndex=0,betArray=[];app.use(bodyParser.json()),app.use(express.static(path.join(__dirname,"public"))),app.get("/api/players",((e,s)=>{s.json(playerArray)})),app.post("/api/players",((e,s)=>{const t=e.body;playerArray.push(t),s.status(201).json(t)})),app.get("/api/bets",((e,s)=>{let t=lastReadBetIndex,a=betArray.length;lastReadBetIndex=a,console.log(t,a),s.json(betArray.slice(t,a))})),app.post("/api/bets",((e,s)=>{const t=e.body;betArray.push(t),s.status(201).json(t)})),app.delete("/api/bets",((e,s)=>{betArray=[{name:"",bet:0,id:0}],s.json({message:"Bets wiped"})})),app.delete("/api/players",((e,s)=>{playerArray=[],s.json({message:"API wiped successfully!"})})),app.get("/sketch.js",(function(e,s){const t={root:path.join(__dirname)},a="/public/sketch.txt";s.sendFile(a,t,(function(e){e?next(e):console.log("Sent:",a)}))})),app.get("/sketchMini.js",(function(e,s){const t={root:path.join(__dirname)},a="/public/sketchMini.txt";s.sendFile(a,t,(function(e){e?next(e):console.log("Sent:",a)}))})),app.listen(3e3,(()=>{console.log("Server is running on http://localhost:3000")}));
